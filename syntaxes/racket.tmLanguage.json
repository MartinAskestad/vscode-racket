{
    "fileTypes": [
		".rkt"
    ],
	"name": "Racket",
	"scopeName": "source.racket",
    "patterns": [
        { "include": "#sexp" },
        { "include": "#string" },
        { "include": "#comment" },
        { "include": "#constant" },
        { "include": "#keyword" },
        { "include": "#quote" },
        { "include": "#quasiquote" }
    ],
    "repository": {
        "quasiquoted-sexp": {
            "begin": "(?<![,@])(\\(|\\[)",
            "end": "(\\)|\\])",
            "name": "meta.sexp.quasiquoted.racket",
            "patterns": [
                { "include": "#unquote" },
                { "include": "#quasiquoted-sexp" },
                { "include": "#atom" },
                { "include": "#symbol" },
                { "include": "#comment" }
            ]
        },
        "quoted-sexp": {
            "name": "meta.expression.quoted.racket",
            "begin": "\\(|\\[",
            "beginCaptures": {
                "0": { "name": "string.quoted.single.racket" }
            },
            "end": "\\)|\\]",
            "endCaptures": {
                "0": { "name": "string.quoted.single.racket" }
            },
            "patterns": [
                { "include": "#quoted-sexp" },
                { "include": "#atom" },
                { "include": "#symbol" },
                { "include": "#comment" }
            ]
        },
        "sexp": {
            "patterns": [
                { "include": "#special-forms" },
                { "include": "#normal-forms" }
            ]
        },
        "normal-forms": {
            "name": "meta.expression.racket",
            "begin": "\\(|\\[",
            "beginCaptures": {
                "0": { "name": "punctuation.section.expression.begin.racket" }
            },
            "end": "\\)|\\]",
            "endCaptures": {
                "0": { "name": "punctuation.section.expression.end.racket" }
            },
            "patterns": [
                { "include": "#quote" },
                { "include": "#quasiquote" },
                { "include": "#language-function" },
                { "include": "#function-call" },
                { "include": "#sexp" },
                { "include": "#atom" },
                { "include": "#comment" }
            ]
        },
        "declaring-pattern": {
            "patterns": [
                {
                    "begin": "(\\()\\s*(?=\\[)",
                    "beginCaptures": {
                        "1": { "name": "punctuation.section.expression.begin.racket" }
                    },
                    "end": "\\)",
                    "endCaptures": {
                        "0": { "name": "punctuation.section.expression.end.racket" }
                    },
                    "patterns": [
                        {
                            "begin": "(\\[)\\s*([^\\s\\{\\}\\(\\)\\[\\]#\\|,\"]+)",
                            "beginCaptures": {
                                "1": { "name": "punctuation.section.expression.begin.racket" },
                                "2": { "name": "variable.other.racket" }
                            },
                            "end": "\\]",
                            "endCaptures": {
                                "0": { "name": "punctuation.section.expression.end.racket" }
                            },
                            "patterns": [
                                { "include": "#quote" },
                                { "include": "#sexp" }
                            ]
                        }
                    ]
                }
            ]
        },
        "special-forms": {
            "patterns": [
                {
                    "name": "meta.expression.racket",
                    "begin": "(\\(|\\[)\\s*((for\\*?(lists?|vector|hash(eq(v)?)?|fold|or|and|first|last|sum|product)?)|(let\\*?)|do)(?=[\\s\\{\\(\\[#])",
                    "beginCaptures": {
                        "1": { "name": "punctuation.section.expression.begin.racket" },
                        "2": { "name": "keyword.control.racket" }
                    },
                    "end": "\\)|\\]",
                    "endCaptures": {
                        "0": { "name": "punctuation.section.expression.end.racket" }
                    },
                    "patterns": [
                        { "include": "#declaring-pattern" },
                        { "include": "#language-function" },
                        { "include": "#sexp" },
                        { "include": "#quote" },
                        { "include": "#quasiquote" },
                        { "include": "#atom" },
                        { "include": "#comment" }
                    ]
                },
                {
                    "name": "meta.expression.racket",
                    "begin": "(\\(|\\[)\\s*(case)(?=[\\s\\{\\(\\[#])",
                    "beginCaptures": {
                        "1": { "name": "punctuation.section.expression.begin.racket" },
                        "2": { "name": "keyword.control.match.racket" }
                    },
                    "end": "\\)|\\]",
                    "endCaptures": {
                        "0": { "name": "punctuation.section.expression.end.racket" }
                    },
                    "patterns": [
                        { 
                            "name": "meta.case.pattern.racket",
                            "begin": "(\\[)\\s*(?=\\()",
                            "beginCaptures": {
                                "1": { "name": "punctuation.section.expression.begin.racket" },
                                "2": { "name": "keyword.control.match.racket" }
                            },
                            "end": "\\]",
                            "endCaptures": {
                                "0": { "name": "punctuation.section.expression.end.racket" }
                            },
                            "patterns": [
                                { 
                                    "name": "meta.case.match.racket",
                                    "begin": "(?<=\\[)\\s*(?=(\\())",
                                    "end": "(?<=\\))",
                                    "patterns": [ 
                                        { "include": "#quoted-sexp" }
                                    ]
                                },
                                { "include": "$self" }
                            ]
                        },
                        { 
                            "name": "meta.expression.racket",
                            "begin": "(\\[)\\s*(else)",
                            "beginCaptures": {
                                "1": { "name": "punctuation.section.expression.begin.racket" },
                                "2": { "name": "keyword.control.racket" }
                            },
                            "end": "\\]",
                            "endCaptures": {
                                "0": { "name": "punctuation.section.expression.end.racket" }
                            },
                            "patterns": [
                                { "include": "$self" }
                            ]
                        },
                        { "include": "#language-function" },
                        { "include": "#sexp" },
                        { "include": "#quote" },
                        { "include": "#quasiquote" },
                        { "include": "#atom" },
                        { "include": "#comment" }
                    ]
                }
            ]
        },
        "function-call": {
            "patterns": [
                {
                    "begin": "(?<=\\(|\\[)\\s*(define-values)\\s*(\\(|\\[)",
                    "beginCaptures": {
                        "1": { "name": "storage.type.racket" },
                        "2": { "name": "punctuation.definition.variable.racket" }
                    },
                    "end": "(?:\\)|\\])",
                    "endCaptures": {
                        "0": { "name": "punctuation.definition.variable.racket" }
                    },
                    "patterns": [
                        {
                            "match": "[^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;]+",
                            "name": "variable.other.racket"
                        }
                    ]
                },
                {
                    "match": "(?<=\\(|\\[)\\s*(define)\\s*([^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;]+)",
                    "captures": {
                        "1": { "name": "storage.type.racket" },
                        "2": { "name": "variable.other.racket" }
                    }
                },
                {
                    "begin": "(?<=\\(|\\[)\\s*(define)\\s*(\\(|\\[)",
                    "beginCaptures": {
                        "1": { "name": "storage.type.racket" },
                        "2": { "name": "punctuation.definition.function.racket" }
                    },
                    "end": "\\)|\\]",
                    "endCaptures": {
                        "0": { "name": "punctuation.definition.function.racket" }
                    },
                    "patterns": [
                        {
                            "match": "(?<=\\(|\\[)\\s*([^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;]+)",
                            "captures": {
                                "1": { "name": "entity.name.function.racket" }
                            }
                        },
                        {
                            "match": "[^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;]+",
                            "name": "variable.parameter.racket"
                        }
                    ]
                },
                {
                    "match": "(?<=\\(|\\[)\\s*([^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;]+)",
                    "captures": {
                        "1": { "name": "variable.function.racket" }
                    }
                }
            ]
        },
        "language-function": {
            "patterns": [
                {
                    "match": "(?<=\\s|\\(|\\[)\\s*([+\\-*\/])(?=[\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])",
                    "captures": {
                        "1": { "name": "keyword.operator.arithmetic.racket" }
                    }
                },
                {
                    "match": "(?<=\\s|\\(|\\[)\\s*(or|and|not)(?=[\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])",
                    "captures": {
                        "1": { "name": "keyword.operator.word.racket" }
                    }
                },
                {
                    "match": "(?<=\\s|\\(|\\[)\\s*(cond|if)(?=[\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])",
                    "captures": {
                        "1": { "name": "keyword.control.conditional.racket" }
                    }
                },
                {
                    "match": "(?<=\\s|\\(|\\[)\\s*(case|match)(?=[\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])",
                    "captures": {
                        "1": { "name": "keyword.control.match.racket" }
                    }
                },
                {
                    "match": "(?<=\\s|\\(|\\[)\\s*(require|provide)(?=[\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])",
                    "captures": {
                        "1": { "name": "keyword.control.import-export.racket" }
                    }
                },
                {
                    "match": "(?<=\\s|\\(|\\[)\\s*(set!|set-values!)(?=[\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])",
                    "captures": {
                        "1": { "name": "keyword.control.assignment.racket" }
                    }
                }
            ]
        },
        "atom": {
            "patterns": [
                { "include": "#string" },
                { "include": "#quote" },
                { "include": "#quasiquote" },
                { "include": "#constant" },
                { "include": "#keyword" }
            ]
            
        },
        "constant": {
            "patterns": [
                {
                    "match": "#[tTfF]",
                    "name": "constant.language.racket"
                },
                {
                    "match": "(?<![^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])(-?\\d+(\\.\\d+)?[+-]\\d+(\\.\\d+)?i)(?![^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])",
                    "captures": {
                        "1": { "name": "constant.numeric.complex.racket" }
                    }
                },
                {
                    "match": "(?<![^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])(-?\\d+\\.\\d+)(?![^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])",
                    "captures": {
                        "1": { "name": "constant.numeric.float.racket" }
                    }
                },
                {
                    "match": "(?<![^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])(-?\\d+)(?![^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])",
                    "captures": {
                        "1": { "name": "constant.numeric.integer.racket" }
                    }
                },
                {
                    "match": "(?:\\b)((inf\\.0)|(inf\\.f)|(nan\\.0)|(nan\\.f))(?:\\b)",
                    "captures": {
                        "1": { "name": "constant.numeric.other.racket" }
                    }
                },
                {
                    "match": "(?<![^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])(#\\\\\\w+)",
                    "captures": {
                        "1": { "name": "constant.character.racket" }
                    }
                }
            ]
        },
        "comment": {
            "patterns": [
                {
                    "match": ";.*$",
                    "name": "comment.line.racket"
                },
                {
                    "name": "comment.sexp.racket",
                    "begin": "#;\\s*(?=\\()",
                    "end": "(?<=\\))",
                    "patterns": [
                        { "include": "#parentheses" }
                    ]
                },
                {
                    "name": "comment.sexp.racket",
                    "begin": "#;",
                    "end": "(?=\\s|\\]|\\))",
                    "patterns": [
                        { "include": "#parentheses" }
                    ]
                },
                {
                    "name": "comment.block.racket",
                    "begin": "#\\|",
                    "end": "\\|#",
                    "patterns": [
                        { "include": "#comment" }
                    ]
                }
            ]
			
        },
        "keyword": {
			"match": "(?<![^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])(#:[^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;]+)",
            "name": "keyword.other.racket"
        },
		"string": {
            "patterns": [
                {
                    "begin": "#(r|p)x\"",
                    "end": "\"",
                    "name": "string.regexp.racket",
                    "patterns": [
                        { "include": "#escaped-char" }
                    ]
                },
                {
                    "begin": "#\"",
                    "end": "\"",
                    "name": "string.quoted.double.byte.racket",
                    "patterns": [
                        { "include": "#escaped-char" }
                    ]
                },
                {
                    "begin": "\"",
                    "end": "\"",
                    "name": "string.quoted.double.racket",
                    "patterns": [
                        { "include": "#escaped-char" }
                    ]
                }
            ]
            
        },
        "quote": {
            "patterns": [
                {
                    "begin": "'(?=[^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])",
                    "end": "(?![^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])",
                    "patterns": [
                        { "include": "#symbol" }
                    ]
                },
                {
                    "begin": "'(?=\\(|\\[)",
                    "end": "(?<=\\)|\\])",
                    "patterns": [
                        { "include": "#quoted-sexp" }
                    ]
                }
            ]
            
        },
        "symbol": {
            "match": "[^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;]+",
            "name": "string.quoted.single.racket"
        },
        "quasiquote": {
            "patterns": [
                {
                    "begin": "`(?=[^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])",
                    "end": "(?![^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])",
                    "patterns": [
                        { "include": "#symbol" }
                    ]
                },
                {
                    "begin": "`(?=\\(|\\[)",
                    "end": "(?<=\\)|\\])",
                    "patterns": [
                        { "include": "#quasiquoted-sexp" }
                    ]
                }
            ]
            
        },
        "unquote": {
            "patterns": [
                {
                    "begin": "(,@?(?=[\\(\\[]))|((?=[\\(\\[]unquote[\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;]))|((?=[\\(\\[]unquote-splicing[\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;]))",
                    "end": "(?<=[\\)\\]])",
                    "name": "meta.unquoted.racket",
                    "patterns": [
                        { "include": "#sexp" }
                    ]
                },
                {
                    "begin": ",(?=[^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])",
                    "end": "(?![^\\s\\{\\}\\(\\)\\[\\]#\\|,\"'´\\\\;])",
                    "patterns": [
                        { "include": "#atom" }
                    ]
                }
            ]
        }, 
		"escaped-char": {
            "name": "constant.character.escape.untitled.racket",
            "match": "\\\\."
        },
        "parentheses": {
            "begin": "\\(",
            "end": "\\)",
            "patterns": [
                { "include": "#parentheses" }
            ]
        }
    }
}